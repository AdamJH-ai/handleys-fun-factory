{# templates/_gty_turn_display.html #}
{# Expects: turn, total_turns, question_data, players_status #}
<div id="gty-content">

    <h2>Guess The Year (Turn {{ turn }}/{{ total_turns }})</h2>

    {% if question_data and question_data.image_url %}
        {# --- THIS IS THE FIX --- #}
        {# Check if the URL is external (starts with http) or local #}
        {% if question_data.image_url.startswith('http') %}
            {# It's an external URL, so we use the src directly #}
            <img class="question-image gty-image" src="{{ question_data.image_url }}" alt="Question Image">
        {% else %}
            {# It's a local file, so we use url_for to build the path #}
            <img class="question-image gty-image" src="{{ url_for('static', filename=question_data.image_url) }}" alt="Question Image">
        {% endif %}
    {% endif %}

    <h3 class="question-text-prominent">{{ question_data.question or 'Question loading...' }}</h3>
    
    {% if question_data.category %}
        <p style="color: var(--text-secondary);">Category: {{ question_data.category }}</p>
    {% endif %}

    <div class="player-status-list" style="margin-top: 30px;">
        <h4>Waiting for players to guess...</h4>
        <ul>
            {% for p_status in players_status %}
                <li id="player-status-{{ p_status.name | replace('[^a-zA-Z0-9-_]', '_') }}">{{ p_status.name }}</li>
            {% endfor %}
        </ul>
    </div>

</div>